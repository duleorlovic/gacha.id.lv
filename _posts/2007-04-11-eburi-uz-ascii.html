---
layout: post
title: Ķeburi uz ASCII
categories: []
tags: ["python", "kods"]
published: true
enable_comments: false
---
{% include JB/setup %}

		
			
<p>Ir sastopamas dažādas <em>slugify</em> funkcijas, kuras no teksta izvelk ārā nevēlamos simbolus un padara to drošu web adresēm vai kur citur, bet nepatīkamākais ir tas, ka tiek izmesti arī mūsu latveišu burti ar garumzīmēm, tad izsaucot šo funkciju, pirms <em>slugify</em> mēs nepazaudēsim teksta jēgu.
</p>
<p /><div class="source"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="k">def</span> <span class="nf">lv_to_ascii</span><span class="p">(</span><span class="n">in_string</span><span class="p">):</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_string</span><span class="p">,</span><span class="nb">unicode</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">u&#39;Tekstam jabūt unicode&#39;</span><span class="p">)</span>
	<span class="n">repl</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s">u&#39;ā&#39;</span> 	<span class="p">:</span> <span class="s">&#39;a&#39;</span><span class="p">,</span>
		<span class="s">u&#39;č&#39;</span>	<span class="p">:</span> <span class="s">&#39;c&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ē&#39;</span>	<span class="p">:</span> <span class="s">&#39;e&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ģ&#39;</span>	<span class="p">:</span> <span class="s">&#39;g&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ī&#39;</span>	<span class="p">:</span> <span class="s">&#39;i&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ķ&#39;</span>	<span class="p">:</span> <span class="s">&#39;k&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ļ&#39;</span>	<span class="p">:</span> <span class="s">&#39;l&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ņ&#39;</span>	<span class="p">:</span> <span class="s">&#39;n&#39;</span><span class="p">,</span>
		<span class="s">u&#39;š&#39;</span>	<span class="p">:</span> <span class="s">&#39;s&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ū&#39;</span>	<span class="p">:</span> <span class="s">&#39;u&#39;</span><span class="p">,</span>
		<span class="s">u&#39;ž&#39;</span>	<span class="p">:</span> <span class="s">&#39;z&#39;</span>
	<span class="p">}</span>
	<span class="n">out_string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">in_string</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
		<span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">repl</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
			<span class="n">out_string</span> <span class="o">+=</span> <span class="n">repl</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">out_string</span> <span class="o">+=</span> <span class="n">i</span>
	<span class="k">return</span> <span class="n">out_string</span>
</pre></div>


<p>Funkcijai padodot <code>glāžšķūņrūķītis</code> mēs dabūtu <code>glazskunrukitis</code>.
</p>

		
	